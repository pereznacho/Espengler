{% extends "admin/base.html" %}
{% load static i18n %}

{% block title %}Panel de AdministraciÃ³n - EspEngler{% endblock %}

{% block extrastyle %}
    {{ block.super }}
    <!-- Estilos personalizados -->
    <link rel="stylesheet" type="text/css" href="{% static 'css/custom.css' %}" id="custom-css">
    <link rel="stylesheet" type="text/css" href="{% static 'css/fix_select2.css' %}">
{% endblock %}

{% block extrahead %}
    {{ block.super }}

    <!-- jQuery para Select2 (si aÃºn no estÃ¡ cargado) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Fix para Select2 -->
    <script src="{% static 'js/fix_select2.js' %}"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            setTimeout(function () {
                // âœ… Inyectar estilos si por algÃºn motivo no se cargaron
                const stylesToCheck = ["custom.css", "fix_select2.css"];

                stylesToCheck.forEach(function (filename) {
                    const isLoaded = Array.from(document.styleSheets).some(sheet => sheet.href && sheet.href.includes(filename));

                    if (!isLoaded) {
                        const link = document.createElement("link");
                        link.href = "{% static 'css/" + filename + "' %}";
                        link.type = "text/css";
                        link.rel = "stylesheet";
                        document.head.appendChild(link);
                        console.log("âœ… " + filename + " inyectado manualmente");
                    } else {
                        console.log("âœ… " + filename + " ya estaba cargado");
                    }
                });

                // ðŸ”¹ Ajustar estilo del Ã¡rea editable de CKEditor si es necesario
                const editorArea = document.querySelector('.ck-editor__editable');
                if (editorArea) {
                    editorArea.style.color = "white";  // Cambiado de negro a blanco por coherencia con fondo oscuro
                }
            }, 1000);  // Esperamos a que el DOM y CKEditor terminen de cargar
        });
    </script>
{% endblock %}

{% block content %}
    {{ block.super }}
{% endblock %}